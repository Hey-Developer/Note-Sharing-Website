(this["webpackJsonpfirebase-tutorial-project"]=this["webpackJsonpfirebase-tutorial-project"]||[]).push([[0],{416:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(3),s=a.n(n),r=a(94),i=a.n(r),l=a(5),o=a(11),j=a(10),d=a(28),u=a(41),b=a(6),h="SIGN_IN_SUCCESS",O="SIGN_IN_FAILED",m="SIGN_OUT_SUCCESS",p="SIGN_UP_SUCCESS",f="SIGN_UP_FAILED",x="EMAIL_VERIFICATION_SENT",g="EMAIL_SENT_ERROR",N=function(){return{type:m}},v=a(31),y=(a(99),a(69));a(233);y.a.initializeApp({apiKey:"AIzaSyB0ktDYDfDufqcr8hsSgnocoo9imrMppIc",authDomain:"fir-tutorial-d729c.firebaseapp.com",databaseURL:"https://fir-tutorial-d729c.firebaseio.com",projectId:"fir-tutorial-d729c",storageBucket:"fir-tutorial-d729c.appspot.com",messagingSenderId:"918010698381",appId:"1:918010698381:web:db412ad54a6d79fc92a0c4",measurementId:"G-4SG88J5XM2"});y.a.firestore();y.a.firestore().settings({timestampsInSnapshots:!0});var w=y.a,S=function(e){return function(t){v.a.auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:h}),sessionStorage.setItem("userLoggedIn",!0)})).catch((function(e){t(function(e){return{type:O,payload:e}}(e))}))}},I=function(e){return function(t){v.a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return v.a.firestore().collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})})).then((function(){t({type:p}),v.a.auth().currentUser.sendEmailVerification().then((function(){t({type:x})})).catch((function(e){t(function(e){return{type:g,payload:e}}(e.message))}))})).catch((function(e){t(function(e){return{type:f,payload:e}}(e.message))}))}},F=function(){var e=v.a.auth().currentUser;return e?e.emailVerified:null};var C=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.auth.signInStatus})),s=Object(b.c)((function(e){return e.firebase.auth})),r={email:"",password:""},i=Object(n.useState)(r),h=Object(u.a)(i,2),O=h[0],m=h[1],p=function(e){m(Object(l.a)(Object(l.a)({},O),{},Object(d.a)({},e.target.name,e.target.value)))};return s.uid?F()?Object(c.jsx)(j.a,{to:"/verify"}):Object(c.jsx)(j.a,{to:"/"}):Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{className:"blur-bg",onSubmit:function(e){e.preventDefault(),t(S(O)),m(r)},children:[e.location.state?Object(c.jsx)("p",{className:"center grey-text text-darken-3 alert-text",children:e.location.state.text}):null,Object(c.jsx)("h5",{className:"grey-text text-darken-3 center-align",children:"Sign-In"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",id:"email",onChange:p,value:O.email})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",name:"password",id:"password",onChange:p,value:O.password})]}),Object(c.jsx)("div",{className:"input-felid",children:Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Login"})}),Object(c.jsx)("div",{className:"red-text center",children:a.error?Object(c.jsx)("p",{children:a.error}):null}),Object(c.jsxs)("p",{className:"center grey-text text-darken-3 ",children:["Not Registered?"," ",Object(c.jsx)(o.b,{to:"/signup",className:"link",children:"Create Account"})]})]})})};var k=function(e){var t=Object(b.c)((function(e){return e.firebase.auth})),a=Object(b.c)((function(e){return e.auth.signUpStatus})),s=Object(b.b)(),r=Object(n.useState)({email:"",password:"",firstName:"",lastName:""}),i=Object(u.a)(r,2),o=i[0],h=i[1],O=Object(n.useState)(!0),m=Object(u.a)(O,2),p=m[0],f=m[1],x=function(e){h(Object(l.a)(Object(l.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))};return t.uid?F()?Object(c.jsx)(j.a,{to:"/"}):Object(c.jsx)(j.a,{to:"/verify"}):Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{className:"blur-bg",onSubmit:function(e){e.preventDefault(),s(I(o))},children:[e.location.state?Object(c.jsx)("p",{className:"center grey-text text-darken-3 alert-text",children:e.location.state.text}):null,Object(c.jsx)("h5",{className:"grey-text text-darken-3 center-align",children:"Sign-Up"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(c.jsx)("input",{type:"text",name:"firstName",id:"firstName",onChange:x,value:o.firstName})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(c.jsx)("input",{type:"text",name:"lastName",id:"lastName",onChange:x,value:o.lastName})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",id:"email",onChange:x,value:o.email})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{className:"psw-inp",type:"password",name:"password",id:"password",onChange:x,value:o.password})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"cnfPassword",children:"Confirm Password"}),Object(c.jsx)("input",{className:"psw-inp",type:"password",name:"cnfPassword",id:"cnfPassword",onChange:function(e){e.target.value===o.password?f(!0):f(!1)},value:o.cnfPassword})]}),Object(c.jsx)("p",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",onClick:function(){document.querySelectorAll(".psw-inp").forEach((function(e){"password"===e.type?e.type="text":e.type="password"}))}}),Object(c.jsx)("span",{children:"Show Password"})]})}),!p&&Object(c.jsx)("p",{className:"red-text",children:"Password didn't Matches"}),Object(c.jsx)("div",{className:"input-felid",children:Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"SignUp"})}),Object(c.jsx)("div",{className:"red-text center",children:a.error?Object(c.jsx)("p",{children:a.error}):null})]})})},P=a(53),E=a.n(P);var A=function(e){var t=e.project;return Object(c.jsx)("div",{className:"card z-depth-0 project-summary blur-bg",children:Object(c.jsxs)("div",{className:"card-content gray-text-text-darken-3",children:[Object(c.jsx)("span",{className:"card-title",children:t.title}),Object(c.jsxs)("p",{children:["Posted by the ",t.authorFirstName," ",t.authorLastName]}),Object(c.jsx)("div",{className:"white-text darken-3 mt",children:E()(t.createdAt.toDate()).calendar()})]})})},_=a(15);var D=function(){Object(_.useFirestoreConnect)([{collection:"projects",orderBy:["createdAt","desc"]}]),Object(b.c)((function(e){return e.firestore}));var e=Object(b.c)((function(e){return e.firestore.ordered.projects}));return Object(c.jsx)("div",{className:"project-list section",children:e&&e.map((function(e){return Object(c.jsx)(o.b,{to:"/project/".concat(e.id),children:Object(c.jsx)(A,{project:e})},e.id)}))})};var L=function(){Object(_.useFirestoreConnect)([{collection:"notifications",limit:4,orderBy:["time","desc"]}]);var e=Object(b.c)((function(e){return e.firestore.ordered.notifications}));return Object(c.jsx)("div",{className:"section notifications-section",children:Object(c.jsx)("div",{className:"card z-depth-0 blur-bg",children:Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("span",{className:"card-title center",children:"Notifications"}),Object(c.jsx)("ul",{className:"notifications",children:e&&e.map((function(e){return Object(c.jsxs)("li",{className:"notification",children:[Object(c.jsx)("span",{className:"pink-text font-size-1",children:e.user})," ","\xa0",Object(c.jsx)("span",{children:e.content}),Object(c.jsx)("div",{className:"grey-text text-darken-3 note-date",children:E()(e.time.toDate()).fromNow()})]},e.id)}))})]})})})};var R=function(){if(!Object(b.c)((function(e){return e.firebase.auth})).uid){return Object(c.jsx)(j.a,{to:{pathname:"/signin",state:{text:"To Continue with the app please Sign In First :)"}}})}if(!F()){return Object(c.jsx)(j.a,{to:{pathname:"/verify",state:{text:"Please Verify Your Email first :)"}}})}return Object(c.jsx)("div",{className:"dashboard container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col s12 m6",children:Object(c.jsx)(D,{})}),Object(c.jsx)("div",{className:"col s12 m5 offset-m1",children:Object(c.jsx)(L,{})})]})})};var U=function(e){var t=e.initials,a=Object(b.b)();return Object(c.jsxs)("ul",{className:"right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{to:"/create",children:"New Project"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{onClick:function(e){a((function(e){v.a.auth().signOut().then((function(){e(N())}))}))},children:"Log Out"})})," ",Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{to:"/",className:"btn btn-floating pink lighten-1",children:t})})]})};var T=function(){return Object(c.jsxs)("ul",{className:"right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{to:"signup/",children:"SignUp"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{to:"/signin",children:"LogIn"})})]})};var V=function(){var e=Object(b.c)((function(e){return e.firebase}));return Object(c.jsx)("div",{className:"navbar-fixed",children:Object(c.jsx)("nav",{className:"nav-wrapper grey darken-3",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(o.b,{to:"/",className:"brand-logo",children:"CloveS"}),e.auth.uid?Object(c.jsx)(U,{initials:e.profile.initials}):Object(c.jsx)(T,{})]})})})},z="ADD_PROJECT",G=function(e){return function(t,a,c){var n=c.getFirestore,s=a().firebase.profile,r=a().firebase.auth.uid;n().collection("projects").add(Object(l.a)(Object(l.a)({},e),{},{authorFirstName:s.firstName,authorLastName:s.lastName,authorId:r,createdAt:new Date})).then((function(){t(function(e){return{type:z,payload:e}}(e))})).catch((function(e){t(function(e){return{type:"ADD_PROJECT_ERROR",payload:e}}(e))}))}};var B=function(e){var t=Object(n.useState)({title:"",content:""}),a=Object(u.a)(t,2),s=a[0],r=a[1],i=Object(b.c)((function(e){return e.firebase.auth})),o=Object(b.b)(),h=function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(d.a)({},e.target.name,e.target.value)))};if(!i.uid){return Object(c.jsx)(j.a,{to:{pathname:"/signin",state:{text:"To Continue with the app please Sign In First :)"}}})}if(!F()){return Object(c.jsx)(j.a,{to:{pathname:"/verify",state:{text:"Please Verify Your Email first :)"}}})}return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o(G(s)),e.history.push("/")},className:"blur-bg",autoComplete:"off",children:[Object(c.jsx)("h5",{className:"grey-text text-darken-3 center-align",children:"Create Project -_-"}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"title",children:"Title"}),Object(c.jsx)("input",{type:"text",name:"title",id:"title",onChange:h,value:s.title})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"content",children:"Content"}),Object(c.jsx)("textarea",{name:"content",id:"content",className:"materialize-textarea",onChange:h,value:s.content})]}),Object(c.jsx)("div",{className:"input-felid",children:Object(c.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})})};var M=function(e){var t=e.match.params.id;Object(_.useFirestoreConnect)(["projects"]);var a=Object(b.c)((function(e){return e.firestore.data.projects})),n=a?a[t]:null;if(!Object(b.c)((function(e){return e.firebase.auth})).uid){return Object(c.jsx)(j.a,{to:{pathname:"/signin",state:{text:"To Continue with the app please Sign In First :)"}}})}if(!F()){return Object(c.jsx)(j.a,{to:{pathname:"/verify",state:{text:"Please Verify Your Email first :)"}}})}return n?Object(c.jsx)("div",{className:"container project-details section",children:Object(c.jsxs)("div",{className:"card blur-bg",children:[Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsxs)("span",{className:"card-title",children:["Project Title- ",n.title]}),Object(c.jsx)("p",{children:n.content})]}),Object(c.jsxs)("div",{className:"card-action grey-text  text-darken-3",children:[Object(c.jsx)("div",{children:"Posted by The ".concat(n.authorFirstName," ").concat(n.authorLastName)}),Object(c.jsx)("div",{children:E()(n.createdAt.toDate()).calendar()})]})]})}):Object(c.jsx)("div",{className:"container center",children:Object(c.jsx)("h1",{className:"white-text",children:"Loading Project..."})})},J=a(29),Y=a(222),q={signInStatus:{success:null,failed:null,error:null},signOutStatus:null,signUpStatus:{success:null,failed:null,error:null},emailVerification:{sent:null,error:null}},W=a(223),H={projects:[{id:"1",title:"let's build that stuff",content:"blah blah blah blah"},{id:"2",title:"help me find the peach",content:"blah blah blah blah"},{id:"3",title:"egg hunt with yoshi",content:"blah blah blah blah"}]},K=a(40),X=Object(J.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(l.a)(Object(l.a)({},e),{},{signInStatus:{success:!0,failed:!1,error:null}});case O:return Object(l.a)(Object(l.a)({},e),{},{signInStatus:{success:!1,failed:!0,error:t.payload.message}});case m:return Object(l.a)(Object(l.a)({},e),{},{signOutStatus:!0});case p:return Object(l.a)(Object(l.a)({},e),{},{signUpStatus:{success:!0,failed:!1,error:null}});case f:return Object(l.a)(Object(l.a)({},e),{},{signUpStatus:{success:!1,failed:!0,error:t.payload}});case x:return Object(l.a)(Object(l.a)({},e),{},{emailVerification:{sent:!0,error:null}});case g:return Object(l.a)(Object(l.a)({},e),{},{emailVerification:{sent:!1,error:t.payload}});default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(l.a)(Object(l.a)({},e),{},{projects:[t.payload].concat(Object(W.a)(e.projects))});default:return e}},firestore:K.firestoreReducer,firebase:_.firebaseReducer}),Q=Object(J.e)(X,Object(J.d)(Object(K.reduxFirestore)(w),Object(J.a)(Y.a.withExtraArgument({getFirestore:K.getFirestore,getFirebase:_.getFirebase}))));var Z=function(e){var t=e.children,a=Object(b.c)((function(e){return e.firebase.auth})),n=Object(_.useFirebase)(),s=Object(b.b)();return Object(_.isLoaded)(a)?t:(sessionStorage.getItem("userLoggedIn")||n.auth().signOut().then((function(){s(N())})),Object(c.jsx)("div",{className:"container section center",children:"Loading Screen..."}))};var $=function(){return Object(c.jsx)("div",{className:"error-page center",children:Object(c.jsx)(o.b,{to:"/",className:"home waves-effect waves-light btn-small pink lighten-2",children:"Go TO Home"})})};var ee=function(e){if(!Object(b.c)((function(e){return e.firebase.auth})).uid){return Object(c.jsx)(j.a,{to:{pathname:"/signup",state:{text:"Before Verifying, Please Register your email"}}})}return F()?Object(c.jsx)(j.a,{to:"/"}):Object(c.jsx)("div",{className:"container section",children:Object(c.jsxs)("div",{className:"section blur-bg verify-div",children:[Object(c.jsx)("h5",{className:"grey-text text-darken-3 center-align",children:"Verify Your Email First"}),Object(c.jsx)("p",{className:"section center",children:"Go and check your mail :)"}),Object(c.jsxs)("p",{className:"center",children:["didn't get verification email?"," ",Object(c.jsx)("a",{href:"#",className:"link",children:"Resend Email"})]})]})})},te={firebase:w,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:Q.dispatch,createFirestoreInstance:K.createFirestoreInstance};var ae=function(){return Object(c.jsx)(o.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(b.a,{store:Q,children:Object(c.jsx)(_.ReactReduxFirebaseProvider,Object(l.a)(Object(l.a)({},te),{},{children:Object(c.jsxs)(Z,{children:[Object(c.jsx)(V,{}),Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/",component:R}),Object(c.jsx)(j.b,{exact:!0,path:"/project/:id",component:M}),Object(c.jsx)(j.b,{exact:!0,path:"/signin",component:C}),Object(c.jsx)(j.b,{exact:!0,path:"/signup",component:k}),Object(c.jsx)(j.b,{exact:!0,path:"/create",component:B}),Object(c.jsx)(j.b,{exact:!0,path:"/verify",component:ee}),Object(c.jsx)(j.b,{component:$})]})]})}))})})})};a(416);i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(ae,{})}),document.getElementById("root"))}},[[417,1,2]]]);
//# sourceMappingURL=main.5468eef5.chunk.js.map